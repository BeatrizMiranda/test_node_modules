"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});

async function parse(context) {
  const {
    organizations
  } = context.assets;
  return {
    organizations: organizations || []
  };
}

async function dump(context) {
  const {
    organizations
  } = context.assets;
  return {
    organizations: [...(organizations || []).map(org => {
      if (org.connections.length > 0) {
        org.connections = org.connections.map(c => {
          const name = c.connection && c.connection.name;
          delete c.connection_id;
          delete c.connection;
          return {
            name,
            ...c
          };
        });
      }

      return org;
    })]
  };
}

exports.default = {
  parse,
  dump
};